# テスト仕様書 - 予約管理システム

## 1. ログイン画面 【user】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | トップ画面 | アプリタイトル表示 | 表示 | アプリタイトルが正常に表示されていること | | |
| 2 | トップ画面 | ログイン | ログイン | メールアドレス、パスワード入力欄が正常に表示されること | | |
| 3 | トップ画面 | ボタン表示 | ボタン表示 | ログインボタンが正常に表示されること | | |
| 4 | ログイン画面 | ログイン(メール認証) | エラーメッセージ | メールアドレス未入力時にバリデーションエラーが表示されること | | |
| 5 | ログイン画面 | ログイン(メール認証) | エラーメッセージ | パスワード未入力時にバリデーションエラーが表示されること | | |
| 6 | ログイン画面 | ログイン(メール認証) | エラーメッセージ | 不正なメール形式入力時にフォーマットエラーが表示されること | | |
| 7 | ログイン画面 | ログイン(メール認証) | エラーメッセージ | 未登録ユーザーのログイン時に認証エラーが表示されること | | |
| 8 | ログイン画面 | ログイン(メール認証) | エラーメッセージ | パスワード間違い時に認証エラーが表示されること | | |
| 9 | ログイン画面 | ログイン(メール認証) | 正常系 | 正しいemail・passwordでログイン成功し単日スケジュール画面に遷移すること | | |
| 10 | 新規登録画面 | ユーザー登録 | 画面遷移 | 「新規アカウント作成」リンククリックで登録画面が表示されること | | |
| 11 | 新規登録画面 | ユーザー登録 | 入力フォーム | 名前、email、password入力欄が表示されること | | |
| 12 | 新規登録画面 | ユーザー登録 | 正常系 | 有効な情報入力でusersテーブルにレコードが作成されること | | |
| 13 | 新規登録画面 | ユーザー登録 | エラーメッセージ | 重複emailでの登録時に重複エラーが表示されること | | |

## 2. ログイン画面 【admin】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | トップ画面 | アプリタイトル表示 | 表示 | アプリタイトルが正常に表示されていること | | |
| 2 | トップ画面 | ログイン | ログイン | メールアドレス、パスワード入力欄が正常に表示されること | | |
| 3 | ログイン画面 | ログイン(メール認証) | エラーメッセージ | パスワード未入力時にバリデーションエラーが表示されること | | |
| 4 | ログイン画面 | ログイン(メール認証) | エラーメッセージ | メールアドレス、パスワード入力後、間違いログイン時に認証エラーが表示されること | | |
| 5 | 管理機能 | ヘッダーUI | 表示 | ヘッダーに管理者用メニュー（予約者リスト、カレンダー表示）が表示されること | | |

## 3. 単日スケジュール画面 【ユーザー向け】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | 単日スケジュール画面 | 基本表示 | タイトル表示 | ページタイトル「単日スケジュール - ○年○月○日」が表示されること | | |
| 2 | 単日スケジュール画面 | 基本表示 | ユーザー表示 | ログイン時ユーザー名またはメールアドレスが表示されること | | |
| 3 | 単日スケジュール画面 | 基本表示 | ボタン表示 | 「予約状況」「カレンダー表示」「設定」ボタンが表示されること | | |
| 4 | 単日スケジュール画面 | 日付ナビゲーション | 日付移動 | 「前日」「今日」「翌日」ボタンで日付が切り替わること | | |
| 5 | 単日スケジュール画面 | 日付ナビゲーション | 日付ピッカー | 日付ピッカーで任意の日付を選択できること | | |
| 6 | 単日スケジュール画面 | カレンダー表示 | カレンダー表示 | 選択した日付の時間スケジュール（9:00-18:00）が表示されること | | |
| 7 | 単日スケジュール画面 | カレンダー表示 | 予約表示 | 登録済み予約が時間帯に表示されること | | |
| 8 | 単日スケジュール画面 | カレンダー表示 | 他ユーザー予約表示 | 他のユーザーの予約が「【予約　有り】」として表示されること | | |
| 9 | 単日スケジュール画面 | カレンダー表示 | 空き枠表示 | 空き枠が視覚的に区別されて表示されること | | |
| 10 | 単日スケジュール画面 | 予約詳細表示 | モーダル表示 | 予約をクリックすると予約詳細モーダルが表示されること | | |
| 11 | 単日スケジュール画面 | 予約詳細表示 | 詳細情報 | 予約詳細に名前、メール、電話番号、予約日時、備考が表示されること | | |
| 12 | 単日スケジュール画面 | 画面遷移 | 予約状況遷移 | 「予約状況」ボタンで予約一覧画面に遷移すること | | |
| 13 | 単日スケジュール画面 | 画面遷移 | カレンダー遷移 | 「カレンダー表示」ボタンで月次カレンダー画面に遷移すること | | |
| 14 | 単日スケジュール画面 | データ表示 | 空状態表示 | 予約未登録時に適切なメッセージが表示されること | | |

## 4. 予約作成画面 【ユーザー向け】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | 予約作成画面 | 基本表示 | モーダル表示 | カレンダーの空き枠をクリックすると予約作成モーダルが表示されること | | |
| 2 | 予約作成画面 | 基本表示 | 入力フォーム | 予約日、開始時間、終了時間、備考の入力欄が表示されること | | |
| 3 | 予約作成画面 | 基本表示 | 自動入力 | ログインユーザーの名前、メールアドレス、電話番号が自動入力されること | | |
| 4 | 予約作成画面 | 時間選択 | 時間ピッカー | 開始時間・終了時間が10分刻み（0, 10, 20, 30, 40, 50分）で選択できること | | |
| 5 | 予約作成画面 | 時間選択 | 営業時間制限 | 9:00-18:00の範囲外の時間が選択できないこと | | |
| 6 | 予約作成画面 | 時間選択 | 過去時間制限 | 過去の日時が選択できないこと | | |
| 7 | 予約作成画面 | 新規追加(手動) | 必須入力チェック | 開始時間未選択時にバリデーションエラーが表示されること | | |
| 8 | 予約作成画面 | 新規追加(手動) | 必須入力チェック | 終了時間未選択時にバリデーションエラーが表示されること | | |
| 9 | 予約作成画面 | 新規追加(手動) | 時間バリデーション | 終了時間が開始時間より前の場合にエラーが表示されること | | |
| 10 | 予約作成画面 | 新規追加(手動) | 時間バリデーション | 予約時間が1時間未満の場合にエラーが表示されること | | |
| 11 | 予約作成画面 | 新規追加(手動) | 時間バリデーション | 予約時間が9時間を超える場合にエラーが表示されること | | |
| 12 | 予約作成画面 | 新規追加(手動) | 時間バリデーション | 10分刻み以外の時間選択時にエラーが表示されること | | |
| 13 | 予約作成画面 | 新規追加(手動) | 容量制限 | 同じ時間帯に既に3組の予約がある場合に満員エラーが表示されること | | |
| 14 | 予約作成画面 | 新規追加(手動) | 正常系 | 有効な情報入力でreservationsテーブルにレコードが作成されること | | |
| 15 | 予約作成画面 | 新規追加(手動) | 正常系 | 予約作成成功時に確認メールが送信されること | | |
| 16 | 予約作成画面 | 新規追加(手動) | 正常系 | 予約作成成功時に予約詳細画面またはカレンダー画面に遷移すること | | |
| 17 | 予約作成画面 | DB連携 | レコード作成 | 予約作成時に適切なuser_idがreservationsテーブルに登録されること | | |
| 18 | 予約作成画面 | DB連携 | ステータス設定 | 予約作成時にstatus='confirmed'が設定されること | | |

## 5. 予約一覧画面 【ユーザー向け】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | 予約一覧画面 | 基本表示 | タイトル表示 | ページタイトル「予約状況」が表示されること | | |
| 2 | 予約一覧画面 | 基本表示 | 予約件数表示 | 予約総件数が「予約一覧: ○件」として表示されること | | |
| 3 | 予約一覧画面 | 基本表示 | ボタン表示 | 「単日スケジュールに戻る」ボタンが表示されること | | |
| 4 | 予約一覧画面 | 予約リスト表示 | 予約カード表示 | 登録済み予約がカード形式で表示されること | | |
| 5 | 予約一覧画面 | 予約リスト表示 | 予約情報表示 | 各予約カードに予約日時、ステータス、備考が表示されること | | |
| 6 | 予約一覧画面 | 予約リスト表示 | ステータス表示 | ステータスが「確定」「保留中」「キャンセル」として表示されること | | |
| 7 | 予約一覧画面 | 予約リスト表示 | ソート | 予約が開始時間の降順でソートされて表示されること | | |
| 8 | 予約一覧画面 | 予約リスト表示 | ページネーション | 20件ごとにページネーションが表示されること | | |
| 9 | 予約一覧画面 | 予約編集機能 | 編集ボタン | 各予約カードに「修正」ボタンが表示されること | | |
| 10 | 予約一覧画面 | 予約編集機能 | 編集モーダル | 「修正」ボタンクリックで編集モーダルが表示されること | | |
| 11 | 予約一覧画面 | 予約編集機能 | 編集フォーム | 編集モーダルに予約日、開始時間、終了時間、備考の入力欄が表示されること | | |
| 12 | 予約一覧画面 | 予約編集機能 | 正常系 | 有効な情報で予約更新が成功し、変更通知メールが送信されること | | |
| 13 | 予約一覧画面 | 予約削除機能 | 削除ボタン | 各予約カードに「削除」ボタンが表示されること | | |
| 14 | 予約一覧画面 | 予約削除機能 | 削除確認モーダル | 「削除」ボタンクリックで削除確認モーダルが表示されること | | |
| 15 | 予約一覧画面 | 予約削除機能 | 削除確認 | 削除確認モーダルに予約者名、予約日時が表示されること | | |
| 16 | 予約一覧画面 | 予約削除機能 | 正常系 | 削除実行でreservationsテーブルからレコードが削除され、キャンセル通知メールが送信されること | | |
| 17 | 予約一覧画面 | データ表示 | 空状態表示 | 予約未登録時に「予約がありません。」と表示されること | | |
| 18 | 予約一覧画面 | データ表示 | フィルタリング | ログインユーザーの予約のみが表示されること | | |

## 6. 予約詳細画面 【ユーザー向け】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | 予約詳細画面 | 基本表示 | タイトル表示 | ページタイトル「予約詳細」が表示されること | | |
| 2 | 予約詳細画面 | 基本表示 | ボタン表示 | 「予約一覧に戻る」「ログアウト」ボタンが表示されること | | |
| 3 | 予約詳細画面 | 予約情報表示 | 予約者情報 | お名前、メールアドレス、電話番号が表示されること | | |
| 4 | 予約詳細画面 | 予約情報表示 | 予約日時 | 予約日時が「○年○月○日 ○○:○○ - ○○:○○」形式で表示されること | | |
| 5 | 予約詳細画面 | 予約情報表示 | ステータス | ステータスが「確定」「保留中」「キャンセル」として表示されること | | |
| 6 | 予約詳細画面 | 予約情報表示 | 備考 | 備考が入力されている場合、備考が表示されること | | |
| 7 | 予約詳細画面 | 画面遷移 | 新規予約遷移 | 「新しい予約を作成」ボタンで予約作成画面に遷移すること | | |
| 8 | 予約詳細画面 | 権限制御 | アクセス制御 | ログインユーザーが自分の予約のみ閲覧できること | | |

## 7. カレンダー画面 【ユーザー向け】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | カレンダー画面 | 基本表示 | カレンダー表示 | 月間カレンダーが正常に表示されること | | |
| 2 | カレンダー画面 | 基本表示 | 予約表示 | 登録済み予約がカレンダー上に表示されること | | |
| 3 | カレンダー画面 | 基本表示 | 他ユーザー予約表示 | 他のユーザーの予約が「【予約　有り】」として表示されること | | |
| 4 | カレンダー画面 | カレンダー操作 | 月移動 | 前月・次月への移動が正常に動作すること | | |
| 5 | カレンダー画面 | カレンダー操作 | 本日表示 | 現在日付がハイライト表示されること | | |
| 6 | カレンダー画面 | 予約詳細確認 | 日付選択 | 日程を選択し押すとモーダルが出現すること | | |
| 7 | カレンダー画面 | 予約詳細確認 | モーダル表示 | 選択した日に予約した内容が確認出来ること | | |
| 8 | カレンダー画面 | 予約詳細確認 | 予約情報 | その日の予約から予約者名・予約時間が正確に表示されること | | |
| 9 | カレンダー画面 | 予約作成 | 空き枠選択 | カレンダーの空き枠をクリックすると予約作成モーダルが表示されること | | |
| 10 | カレンダー画面 | 予約作成 | 予約作成 | 予約作成が成功し、カレンダーに反映されること | | |
| 11 | カレンダー画面 | DB連携 | 履歴検索 | reservationsテーブルから日付別予約を取得すること | | |
| 12 | カレンダー画面 | DB連携 | 商品情報連携 | 予約情報が正確に表示されること | | |
| 13 | カレンダー画面 | データ表示制御 | 未予約日 | 予約履歴のない日付では何も表示されないこと | | |
| 14 | カレンダー画面 | データ表示制御 | エラーハンドリング | データ取得エラー時に適切なエラーメッセージが表示されること | | |

## 8. 単日スケジュール画面 【管理者向け】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | 単日スケジュール画面 | 基本表示 | タイトル表示 | ページタイトル「単日スケジュール - ○年○月○日」が表示されること | | |
| 2 | 単日スケジュール画面 | 基本表示 | 管理者表示 | ヘッダーに「管理者さん」または管理者名が表示されること | | |
| 3 | 単日スケジュール画面 | 基本表示 | ボタン表示 | 「予約者リスト」「カレンダー表示」「設定」ボタンが表示されること | | |
| 4 | 単日スケジュール画面 | カレンダー表示 | 全予約表示 | 全てのユーザーの予約が予約者名で表示されること | | |
| 5 | 単日スケジュール画面 | 予約詳細表示 | 詳細情報 | 予約詳細に全ての情報（名前、メール、電話、予約日時、備考、ユーザーID）が表示されること | | |
| 6 | 単日スケジュール画面 | 画面遷移 | 予約者リスト遷移 | 「予約者リスト」ボタンで予約者リスト画面に遷移すること | | |

## 9. 予約者リスト画面 【管理者向け】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | 予約者リスト画面 | 基本表示 | タイトル表示 | ページタイトルが表示されること | | |
| 2 | 予約者リスト画面 | 検索機能 | 検索フォーム | 予約日、予約時間、名前、電話番号、メールアドレスでの検索フォームが表示されること | | |
| 3 | 予約者リスト画面 | 検索機能 | 日付検索 | 予約日での検索が正常に動作すること | | |
| 4 | 予約者リスト画面 | 検索機能 | 時間検索 | 予約時間での検索が正常に動作すること | | |
| 5 | 予約者リスト画面 | 検索機能 | 名前検索 | 名前での部分一致検索が正常に動作すること | | |
| 6 | 予約者リスト画面 | 検索機能 | 電話番号検索 | 電話番号での部分一致検索が正常に動作すること | | |
| 7 | 予約者リスト画面 | 検索機能 | メール検索 | メールアドレスでの部分一致検索が正常に動作すること | | |
| 8 | 予約者リスト画面 | 予約リスト表示 | リスト表示 | 検索結果の予約がリスト形式で表示されること | | |
| 9 | 予約者リスト画面 | 予約リスト表示 | 予約情報 | 各予約に予約日時、予約者名、連絡先情報が表示されること | | |
| 10 | 予約者リスト画面 | 予約リスト表示 | ソート | 予約が開始時間の降順でソートされて表示されること | | |
| 11 | 予約者リスト画面 | 予約リスト表示 | ページネーション | 20件ごとにページネーションが表示されること | | |
| 12 | 予約者リスト画面 | 予約削除機能 | 削除ボタン | 各予約に削除ボタンが表示されること | | |
| 13 | 予約者リスト画面 | 予約削除機能 | 正常系 | 削除実行でreservationsテーブルからレコードが削除されること | | |
| 14 | 予約者リスト画面 | データ表示 | 全予約表示 | 検索条件なしの場合、全予約が表示されること | | |

## 10. カレンダー画面 【管理者向け】 の場合

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | カレンダー画面 | 基本表示 | カレンダー表示 | 月間カレンダーが正常に表示されること | | |
| 2 | カレンダー画面 | 基本表示 | 予約表示 | 全てのユーザーの予約が予約者名で表示されること | | |
| 3 | カレンダー画面 | カレンダー操作 | 月移動 | 前月・次月への移動が正常に動作すること | | |
| 4 | カレンダー画面 | カレンダー操作 | 本日表示 | 現在日付がハイライト表示されること | | |
| 5 | カレンダー画面 | 予約詳細確認 | 日付選択 | 日程を選択し押すとモーダルが出現すること | | |
| 6 | カレンダー画面 | 予約詳細確認 | モーダル表示 | 選択した日の全予約内容が確認出来ること | | |
| 7 | カレンダー画面 | 予約詳細確認 | 予約情報 | その日の予約から予約者名・予約時間が正確に表示されること | | |
| 8 | カレンダー画面 | DB連携 | 履歴検索 | reservationsテーブルから日付別予約を取得すること | | |
| 9 | カレンダー画面 | データ表示制御 | 未予約日 | 予約履歴のない日付では何も表示されないこと | | |
| 10 | カレンダー画面 | データ表示制御 | エラーハンドリング | データ取得エラー時に適切なエラーメッセージが表示されること | | |

## 11. メール送信機能

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | メール送信 | 予約確認メール | 送信タイミング | 予約作成成功時に確認メールが送信されること | | |
| 2 | メール送信 | 予約確認メール | メール内容 | 予約者名、予約日時、予約詳細がメールに含まれること | | |
| 3 | メール送信 | 変更通知メール | 送信タイミング | 予約更新成功時に変更通知メールが送信されること | | |
| 4 | メール送信 | 変更通知メール | メール内容 | 変更後の予約情報がメールに含まれること | | |
| 5 | メール送信 | キャンセル通知メール | 送信タイミング | 予約削除成功時にキャンセル通知メールが送信されること | | |
| 6 | メール送信 | キャンセル通知メール | メール内容 | キャンセルされた予約情報がメールに含まれること | | |
| 7 | メール送信 | エラーハンドリング | 送信失敗 | メール送信失敗時も予約処理は続行されること | | |

## 12. 権限制御・セキュリティ

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | 権限制御 | 認証 | 未ログイン | 未ログイン時に予約画面にアクセスできないこと | | |
| 2 | 権限制御 | 認証 | ログイン必須 | 予約作成・編集・削除にはログインが必要であること | | |
| 3 | 権限制御 | 予約アクセス | 他ユーザー予約 | 一般ユーザーが他のユーザーの予約詳細を閲覧できないこと | | |
| 4 | 権限制御 | 予約編集 | 他ユーザー予約編集 | 一般ユーザーが他のユーザーの予約を編集できないこと | | |
| 5 | 権限制御 | 予約削除 | 他ユーザー予約削除 | 一般ユーザーが他のユーザーの予約を削除できないこと | | |
| 6 | 権限制御 | 管理者権限 | 全予約閲覧 | 管理者が全ユーザーの予約を閲覧できること | | |
| 7 | 権限制御 | 管理者権限 | 全予約削除 | 管理者が全ユーザーの予約を削除できること | | |
| 8 | セキュリティ | CSRF対策 | トークン検証 | フォーム送信時にCSRFトークンが検証されること | | |
| 9 | セキュリティ | 入力検証 | XSS対策 | 入力値が適切にエスケープされること | | |

## 13. バリデーション

| No. | 大項目 | 中項目 | 小項目 | 期待する結果 | 実際の結果 | テスト日 |
|-----|--------|--------|--------|--------------|------------|----------|
| 1 | バリデーション | 必須項目 | 開始時間 | 開始時間が未入力の場合にエラーが表示されること | | |
| 2 | バリデーション | 必須項目 | 終了時間 | 終了時間が未入力の場合にエラーが表示されること | | |
| 3 | バリデーション | 必須項目 | 予約者名 | 予約者名が未入力の場合にエラーが表示されること | | |
| 4 | バリデーション | 時間制約 | 過去日時 | 過去の日時での予約ができないこと | | |
| 5 | バリデーション | 時間制約 | 営業時間 | 営業時間（9:00-18:00）外の予約ができないこと | | |
| 6 | バリデーション | 時間制約 | 10分刻み | 10分刻み以外の時間での予約ができないこと | | |
| 7 | バリデーション | 時間制約 | 最小時間 | 予約時間が1時間未満の場合にエラーが表示されること | | |
| 8 | バリデーション | 時間制約 | 最大時間 | 予約時間が9時間を超える場合にエラーが表示されること | | |
| 9 | バリデーション | 時間制約 | 終了時間 | 終了時間が開始時間より前の場合にエラーが表示されること | | |
| 10 | バリデーション | 容量制限 | 最大予約数 | 同じ時間帯に3組を超える予約ができないこと | | |
| 11 | バリデーション | 容量制限 | 重複チェック | 時間が重なる予約が適切に検出されること | | |





