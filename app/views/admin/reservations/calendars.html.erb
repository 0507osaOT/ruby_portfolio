<!DOCTYPE html>
<html>
<head>
  <title>カレンダー - 予約管理システム</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  
  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/main.min.css" rel="stylesheet" />
  
  <!-- カスタムCSS - Railsのアセットパイプライン経由 -->
  <%= stylesheet_link_tag 'admin/calendar-styles', media: 'all' %>
  
  <!-- FullCalendar JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
  
  <!-- グローバル変数の設定 -->
  <script>
    window.calendarEventsUrl = '<%= calendar_events_admin_reservations_path %>';
    window.reservationsPath = '<%= admin_reservations_path %>';
  </script>
</head>
<body>
  <div class="header">
    <h1>カレンダー - 予約管理システム</h1>
    <div class="header-buttons">
      <span class="admin-name"><%= current_user.name.presence || "管理者さん" %></span>
      <%= link_to '単日スケジュールに戻る', admin_reservations_path, class: 'btn' %>
    </div>
  </div>
   
  <div class="controls">
    <button class="btn" id="prev-btn">◀ 前へ</button>
    <button class="btn" id="today-btn">今日</button>
    <button class="btn" id="next-btn">次へ ▶</button>
    <input type="date" id="datePicker">
  </div>
 
  <div id="calendar"></div>
 
  <div id="reservationModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>予約詳細</h2>
        <button class="close" id="close-modal">&times;</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>
  
  <!-- 管理者用カレンダーJavaScript -->
  <%= javascript_include_tag "admin-calendar", "data-turbo-track": "reload", defer: true %>
</body>
</html>
